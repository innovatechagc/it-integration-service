{
	"info": {
		"_postman_id": "it-integration-service-collection",
		"name": "IT Integration Service - Complete API",
		"description": "ColecciÃ³n completa para el servicio de integraciÃ³n de mensajerÃ­a con WhatsApp, Telegram, Messenger, Instagram y Webchat",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "it-integration-service"
	},
	"item": [
		{
			"name": "Health & Status",
			"item": [
				{
					"name": "Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/health",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "health"]
						}
					}
				},
				{
					"name": "Readiness Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/ready",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "ready"]
						}
					}
				}
			]
		},
		{
			"name": "Channel Management",
			"item": [
				{
					"name": "Get All Channels",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/channels?tenant_id={{tenant_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "channels"],
							"query": [
								{
									"key": "tenant_id",
									"value": "{{tenant_id}}"
								}
							]
						}
					}
				},
				{
					"name": "Get Channel by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/channels/{{channel_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "channels", "{{channel_id}}"]
						}
					}
				},
				{
					"name": "Create Channel",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"platform\": \"whatsapp\",\n  \"provider\": \"meta\",\n  \"access_token\": \"your_access_token_here\",\n  \"webhook_url\": \"https://your-domain.com/api/v1/integrations/webhooks/whatsapp\",\n  \"status\": \"active\",\n  \"config\": {\n    \"phone_number_id\": \"your_phone_number_id\",\n    \"business_account_id\": \"your_business_account_id\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/channels",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "channels"]
						}
					}
				},
				{
					"name": "Update Channel",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"disabled\",\n  \"config\": {\n    \"updated_field\": \"new_value\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/channels/{{channel_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "channels", "{{channel_id}}"]
						}
					}
				},
				{
					"name": "Delete Channel",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/channels/{{channel_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "channels", "{{channel_id}}"]
						}
					}
				}
			]
		},
		{
			"name": "Telegram Setup",
			"item": [
				{
					"name": "Get Bot Info",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/telegram/bot-info?bot_token={{telegram_bot_token}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "telegram", "bot-info"],
							"query": [
								{
									"key": "bot_token",
									"value": "{{telegram_bot_token}}"
								}
							]
						}
					}
				},
				{
					"name": "Setup Telegram Integration",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"bot_token\": \"{{telegram_bot_token}}\",\n  \"webhook_url\": \"https://your-domain.com/api/v1/integrations/webhooks/telegram\",\n  \"tenant_id\": \"{{tenant_id}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/telegram/setup",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "telegram", "setup"]
						}
					}
				},
				{
					"name": "Get Webhook Info",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/telegram/webhook-info?bot_token={{telegram_bot_token}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "telegram", "webhook-info"],
							"query": [
								{
									"key": "bot_token",
									"value": "{{telegram_bot_token}}"
								}
							]
						}
					}
				},
				{
					"name": "Set Webhook",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"bot_token\": \"{{telegram_bot_token}}\",\n  \"webhook_url\": \"https://your-domain.com/api/v1/integrations/webhooks/telegram\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/telegram/webhook",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "telegram", "webhook"]
						}
					}
				},
				{
					"name": "Delete Webhook",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/telegram/webhook?bot_token={{telegram_bot_token}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "telegram", "webhook"],
							"query": [
								{
									"key": "bot_token",
									"value": "{{telegram_bot_token}}"
								}
							]
						}
					}
				},
				{
					"name": "Send Test Message",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"bot_token\": \"{{telegram_bot_token}}\",\n  \"chat_id\": \"{{telegram_chat_id}}\",\n  \"text\": \"ðŸ¤– Â¡Hola! Este es un mensaje de prueba del bot de IT App Chat.\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/telegram/test-message",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "telegram", "test-message"]
						}
					}
				}
			]
		},
		{
			"name": "WhatsApp Setup",
			"item": [
				{
					"name": "Get Business Info",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/whatsapp/business-info?access_token={{whatsapp_access_token}}&business_account_id={{whatsapp_business_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "whatsapp", "business-info"],
							"query": [
								{
									"key": "access_token",
									"value": "{{whatsapp_access_token}}"
								},
								{
									"key": "business_account_id",
									"value": "{{whatsapp_business_id}}"
								}
							]
						}
					}
				},
				{
					"name": "Get Phone Number Info",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/whatsapp/phone-info?access_token={{whatsapp_access_token}}&phone_number_id={{whatsapp_phone_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "whatsapp", "phone-info"],
							"query": [
								{
									"key": "access_token",
									"value": "{{whatsapp_access_token}}"
								},
								{
									"key": "phone_number_id",
									"value": "{{whatsapp_phone_id}}"
								}
							]
						}
					}
				},
				{
					"name": "Setup WhatsApp Integration",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"access_token\": \"{{whatsapp_access_token}}\",\n  \"phone_number_id\": \"{{whatsapp_phone_id}}\",\n  \"business_account_id\": \"{{whatsapp_business_id}}\",\n  \"webhook_url\": \"https://your-domain.com/api/v1/integrations/webhooks/whatsapp\",\n  \"tenant_id\": \"{{tenant_id}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/whatsapp/setup",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "whatsapp", "setup"]
						}
					}
				},
				{
					"name": "Send Test Message",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"access_token\": \"{{whatsapp_access_token}}\",\n  \"phone_number_id\": \"{{whatsapp_phone_id}}\",\n  \"recipient\": \"{{whatsapp_test_recipient}}\",\n  \"text\": \"ðŸ¤– Â¡Hola! Este es un mensaje de prueba de WhatsApp Business desde IT App Chat.\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/whatsapp/test-message",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "whatsapp", "test-message"]
						}
					}
				},
				{
					"name": "Validate Webhook",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/whatsapp/webhook-verify?hub.mode=subscribe&hub.verify_token=wpp-it-app-webhook-verify-token&hub.challenge=12345",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "whatsapp", "webhook-verify"],
							"query": [
								{
									"key": "hub.mode",
									"value": "subscribe"
								},
								{
									"key": "hub.verify_token",
									"value": "wpp-it-app-webhook-verify-token"
								},
								{
									"key": "hub.challenge",
									"value": "12345"
								}
							]
						}
					}
				}
			]
		},
		{
			"name": "Message Operations",
			"item": [
				{
					"name": "Send Single Message",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"channel_id\": \"{{channel_id}}\",\n  \"recipient\": \"{{recipient_phone}}\",\n  \"content\": {\n    \"type\": \"text\",\n    \"text\": \"Â¡Hola! Este es un mensaje de prueba desde IT App Chat.\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/send",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "send"]
						}
					}
				},
				{
					"name": "Send Media Message",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"channel_id\": \"{{channel_id}}\",\n  \"recipient\": \"{{recipient_phone}}\",\n  \"content\": {\n    \"type\": \"media\",\n    \"text\": \"AquÃ­ tienes una imagen:\",\n    \"media\": {\n      \"url\": \"https://example.com/image.jpg\",\n      \"caption\": \"Imagen de ejemplo\",\n      \"mime_type\": \"image/jpeg\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/send",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "send"]
						}
					}
				},
				{
					"name": "Broadcast Message",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"platforms\": [\"whatsapp\", \"telegram\"],\n  \"recipients\": [\n    \"{{recipient_phone_1}}\",\n    \"{{recipient_phone_2}}\",\n    \"{{telegram_chat_id}}\"\n  ],\n  \"content\": {\n    \"type\": \"text\",\n    \"text\": \"ðŸ“¢ Mensaje masivo: Â¡Hola a todos! Este es un mensaje enviado a mÃºltiples plataformas.\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/broadcast",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "broadcast"]
						}
					}
				}
			]
		},
		{
			"name": "Message History",
			"item": [
				{
					"name": "Get Inbound Messages",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/messages/inbound?platform=whatsapp&limit=50&offset=0",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "messages", "inbound"],
							"query": [
								{
									"key": "platform",
									"value": "whatsapp"
								},
								{
									"key": "limit",
									"value": "50"
								},
								{
									"key": "offset",
									"value": "0"
								}
							]
						}
					}
				},
				{
					"name": "Get Outbound Messages",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/messages/outbound?platform=telegram&limit=50&offset=0",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "messages", "outbound"],
							"query": [
								{
									"key": "platform",
									"value": "telegram"
								},
								{
									"key": "limit",
									"value": "50"
								},
								{
									"key": "offset",
									"value": "0"
								}
							]
						}
					}
				},
				{
					"name": "Get Chat History",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/chat/whatsapp/{{user_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "chat", "whatsapp", "{{user_id}}"]
						}
					}
				}
			]
		},
		{
			"name": "Webhooks",
			"item": [
				{
					"name": "WhatsApp Webhook (Verification)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/webhooks/whatsapp?hub.mode=subscribe&hub.verify_token=wpp-it-app-webhook-verify-token&hub.challenge=12345",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "webhooks", "whatsapp"],
							"query": [
								{
									"key": "hub.mode",
									"value": "subscribe"
								},
								{
									"key": "hub.verify_token",
									"value": "wpp-it-app-webhook-verify-token"
								},
								{
									"key": "hub.challenge",
									"value": "12345"
								}
							]
						}
					}
				},
				{
					"name": "WhatsApp Webhook (Message)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-Hub-Signature-256",
								"value": "sha256=signature_here"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"object\": \"whatsapp_business_account\",\n  \"entry\": [\n    {\n      \"id\": \"business_account_id\",\n      \"changes\": [\n        {\n          \"value\": {\n            \"messaging_product\": \"whatsapp\",\n            \"metadata\": {\n              \"display_phone_number\": \"+1234567890\",\n              \"phone_number_id\": \"phone_number_id\"\n            },\n            \"messages\": [\n              {\n                \"from\": \"sender_phone_number\",\n                \"id\": \"message_id\",\n                \"timestamp\": \"1234567890\",\n                \"text\": {\n                  \"body\": \"Hola, este es un mensaje de prueba\"\n                },\n                \"type\": \"text\"\n              }\n            ]\n          },\n          \"field\": \"messages\"\n        }\n      ]\n    }\n  ]\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/webhooks/whatsapp",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "webhooks", "whatsapp"]
						}
					}
				},
				{
					"name": "Telegram Webhook",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"update_id\": 123456789,\n  \"message\": {\n    \"message_id\": 1,\n    \"from\": {\n      \"id\": 987654321,\n      \"is_bot\": false,\n      \"first_name\": \"Usuario\",\n      \"username\": \"usuario_test\",\n      \"language_code\": \"es\"\n    },\n    \"chat\": {\n      \"id\": 987654321,\n      \"first_name\": \"Usuario\",\n      \"username\": \"usuario_test\",\n      \"type\": \"private\"\n    },\n    \"date\": 1234567890,\n    \"text\": \"Hola bot, este es un mensaje de prueba\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/webhooks/telegram",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "webhooks", "telegram"]
						}
					}
				},
				{
					"name": "Messenger Webhook (Verification)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/webhooks/messenger?hub.mode=subscribe&hub.verify_token=messenger-verify-token&hub.challenge=12345",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "webhooks", "messenger"],
							"query": [
								{
									"key": "hub.mode",
									"value": "subscribe"
								},
								{
									"key": "hub.verify_token",
									"value": "messenger-verify-token"
								},
								{
									"key": "hub.challenge",
									"value": "12345"
								}
							]
						}
					}
				},
				{
					"name": "Instagram Webhook (Verification)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/webhooks/instagram?hub.mode=subscribe&hub.verify_token=instagram-verify-token&hub.challenge=12345",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "webhooks", "instagram"],
							"query": [
								{
									"key": "hub.mode",
									"value": "subscribe"
								},
								{
									"key": "hub.verify_token",
									"value": "instagram-verify-token"
								},
								{
									"key": "hub.challenge",
									"value": "12345"
								}
							]
						}
					}
				},
				{
					"name": "Webchat Webhook",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"type\": \"message\",\n  \"user_id\": \"webchat_user_123\",\n  \"session_id\": \"session_abc123\",\n  \"message\": {\n    \"text\": \"Hola, necesito ayuda con mi pedido\",\n    \"timestamp\": \"2024-01-15T10:30:00Z\"\n  },\n  \"metadata\": {\n    \"page_url\": \"https://example.com/contact\",\n    \"user_agent\": \"Mozilla/5.0...\",\n    \"ip_address\": \"192.168.1.1\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/integrations/webhooks/webchat",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "integrations", "webhooks", "webchat"]
						}
					}
				}
			]
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080",
			"type": "string"
		},
		{
			"key": "tenant_id",
			"value": "tenant_123",
			"type": "string"
		},
		{
			"key": "channel_id",
			"value": "channel_abc123",
			"type": "string"
		},
		{
			"key": "telegram_bot_token",
			"value": "1234567890:ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijk",
			"type": "string"
		},
		{
			"key": "telegram_chat_id",
			"value": "987654321",
			"type": "string"
		},
		{
			"key": "whatsapp_access_token",
			"value": "EAAxxxxxxxxxxxxxxx",
			"type": "string"
		},
		{
			"key": "whatsapp_phone_id",
			"value": "123456789012345",
			"type": "string"
		},
		{
			"key": "whatsapp_business_id",
			"value": "987654321098765",
			"type": "string"
		},
		{
			"key": "whatsapp_test_recipient",
			"value": "573001234567",
			"type": "string"
		},
		{
			"key": "recipient_phone",
			"value": "573001234567",
			"type": "string"
		},
		{
			"key": "recipient_phone_1",
			"value": "573001234567",
			"type": "string"
		},
		{
			"key": "recipient_phone_2",
			"value": "573009876543",
			"type": "string"
		},
		{
			"key": "user_id",
			"value": "user_123",
			"type": "string"
		}
	]
}